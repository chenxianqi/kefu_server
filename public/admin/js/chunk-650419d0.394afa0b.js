(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-650419d0"],{"26b0":function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"mini-im-head"},[o("span",[o("i",{staticClass:"el-icon-setting"}),o("span",{attrs:{slot:"title"},slot:"title"},[e._v("系统设置")])])]),o("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"基本设置",name:"first"}},[o("el-form",{ref:"form",staticStyle:{width:"500px"},attrs:{"label-width":"100px"}},[o("el-form-item",{attrs:{label:"系统LOGO","label-width":"120px"}},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:3}},[o("div",{staticClass:"mini-im-file-button",attrs:{title:"点击上传图片"}},[o("img",{attrs:{src:e.systemInfo.logo,alt:"点击上传图片"}}),o("input",{attrs:{disabled:!e.isRoot,onClick:"this.value = null",type:"file",accept:"image/*"},on:{change:e.systemLogoUpload}}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isUploadingSysLogo,expression:"isUploadingSysLogo"}],staticClass:"mini-im-file-percent"},[o("span",[e._v(e._s(e.uploadysLogoPercent))])])])]),o("el-col",{attrs:{span:6}})],1)],1),o("el-form-item",{attrs:{label:"系统名称"}},[o("el-input",{attrs:{readonly:!e.isRoot,placeholder:"请输入系统名称"},model:{value:e.systemInfo.title,callback:function(t){e.$set(e.systemInfo,"title",t)},expression:"systemInfo.title"}})],1),o("el-form-item",{attrs:{label:"版权信息"}},[o("el-input",{attrs:{readonly:!e.isRoot,placeholder:"请输入版权信息"},model:{value:e.systemInfo.copy_right,callback:function(t){e.$set(e.systemInfo,"copy_right",t)},expression:"systemInfo.copy_right"}})],1),o("el-divider",{attrs:{"content-position":"left"}},[e._v("选择资源存储空间服务商（上传的，图片，文件）")]),o("el-form-item",{attrs:{label:"上传选项"}},[o("el-select",{model:{value:e.systemInfo.upload_mode,callback:function(t){e.$set(e.systemInfo,"upload_mode",t)},expression:"systemInfo.upload_mode"}},e._l(e.$store.getters.uploadsConfigs,(function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),o("el-form-item",[e.isRoot?o("el-button",{attrs:{size:"mini"},on:{click:e.saveSystem}},[e._v("保存设置")]):e._e()],1)],1)],1),o("el-tab-pane",{attrs:{label:"公司信息",name:"second"}},[o("el-divider",{attrs:{"content-position":"left"}},[e._v("该配置信息会展示在各个前台给客户")]),o("el-form",{ref:"form",staticStyle:{width:"500px"},attrs:{"label-width":"100px"}},[o("el-form-item",{attrs:{label:"公司LOGO","label-width":"120px"}},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:3}},[o("div",{staticClass:"mini-im-file-button",attrs:{title:"点击上传图片"}},[o("img",{attrs:{src:e.companyInfo.logo,alt:"点击上传图片"}}),o("input",{attrs:{disabled:!e.isRoot,onClick:"this.value = null",type:"file",accept:"image/*"},on:{change:e.companyLogoUpload}}),o("div",{directives:[{name:"show",rawName:"v-show",value:e.isUploadingCompany,expression:"isUploadingCompany"}],staticClass:"mini-im-file-percent"},[o("span",[e._v(e._s(e.uploadCompanyPercent))])])])]),o("el-col",{attrs:{span:6}})],1)],1),o("el-form-item",{attrs:{label:"公司名称"}},[o("el-input",{attrs:{readonly:!e.isRoot,placeholder:"请输入公司名称"},model:{value:e.companyInfo.title,callback:function(t){e.$set(e.companyInfo,"title",t)},expression:"companyInfo.title"}})],1),o("el-form-item",{attrs:{label:"服务时间"}},[o("el-input",{attrs:{readonly:!e.isRoot,placeholder:"请输入在线客服服务时间"},model:{value:e.companyInfo.service,callback:function(t){e.$set(e.companyInfo,"service",t)},expression:"companyInfo.service"}})],1),o("el-form-item",{attrs:{label:"公司邮箱"}},[o("el-input",{attrs:{readonly:!e.isRoot,placeholder:"请输入公司邮箱"},model:{value:e.companyInfo.email,callback:function(t){e.$set(e.companyInfo,"email",t)},expression:"companyInfo.email"}})],1),o("el-form-item",{attrs:{label:"公司电话"}},[o("el-input",{attrs:{readonly:!e.isRoot,placeholder:"请输入公司电话"},model:{value:e.companyInfo.tel,callback:function(t){e.$set(e.companyInfo,"tel",t)},expression:"companyInfo.tel"}})],1),o("el-form-item",{attrs:{label:"公司地址"}},[o("el-input",{attrs:{readonly:!e.isRoot,type:"textarea",rows:"5",placeholder:"请输入公司地址"},model:{value:e.companyInfo.address,callback:function(t){e.$set(e.companyInfo,"address",t)},expression:"companyInfo.address"}})],1),o("el-form-item",[e.isRoot?o("el-button",{attrs:{size:"mini"},on:{click:e.saveCompany}},[e._v("保存设置")]):e._e()],1)],1)],1),e.isRoot?o("el-tab-pane",{attrs:{label:"七牛云存储配置",name:"three"}},[o("el-form",{ref:"form",staticStyle:{width:"500px"},attrs:{"label-width":"100px"}},[o("el-divider",{attrs:{"content-position":"left"}},[e._v("请不要随意修改该选项，可能会导致客户端上传不了文件或图片")]),o("el-form-item",{attrs:{label:"Bucket"}},[o("el-input",{attrs:{placeholder:"请输入bucket"},model:{value:e.qiniuSecret.bucket,callback:function(t){e.$set(e.qiniuSecret,"bucket",t)},expression:"qiniuSecret.bucket"}})],1),o("el-form-item",{attrs:{label:"accessKey"}},[o("el-input",{attrs:{placeholder:"请输入accessKey","show-password":""},model:{value:e.qiniuSecret.access_key,callback:function(t){e.$set(e.qiniuSecret,"access_key",t)},expression:"qiniuSecret.access_key"}})],1),o("el-form-item",{attrs:{label:"secretKey"}},[o("el-input",{attrs:{placeholder:"请输入secretKey","show-password":""},model:{value:e.qiniuSecret.secret_key,callback:function(t){e.$set(e.qiniuSecret,"secret_key",t)},expression:"qiniuSecret.secret_key"}})],1),o("el-form-item",{attrs:{label:"Host"}},[o("el-input",{attrs:{placeholder:"请输入host"},model:{value:e.qiniuSecret.host,callback:function(t){e.$set(e.qiniuSecret,"host",t)},expression:"qiniuSecret.host"}})],1),o("el-form-item",[o("el-button",{attrs:{size:"mini"},on:{click:e.saveQiniu}},[e._v("保存设置")])],1)],1)],1):e._e(),o("el-tab-pane",{attrs:{label:"客户端平台",name:"fives"}},[o("el-divider",{attrs:{"content-position":"left"}},[e._v("通过该配置，对接的平台，机器人，知识库匹配等 (系统默认项不可修改)")]),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.$store.getters.platformConfig}},[o("el-table-column",{attrs:{prop:"id",label:"#ID",width:"80"}}),o("el-table-column",{attrs:{prop:"title",label:"名称",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.system?o("el-tag",{attrs:{type:"danger"}},[e._v(e._s(t.row.title))]):e._e(),0==t.row.system?o("el-tag",[e._v(e._s(t.row.title))]):e._e()]}}])}),o("el-table-column",{attrs:{prop:"alias",label:"别名",align:"center"}}),e.isRoot?o("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.system?[o("el-button",{attrs:{size:"mini"},on:{click:function(o){return e.editPlatform(t.row)}}},[e._v("编 辑")]),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return e.deletePlatform(t.row)}}},[e._v("删 除")])]:e._e(),1==t.row.system?o("span",{staticStyle:{"font-size":"12px",color:"#999"}},[e._v("系统内置，不可操作")]):e._e()]}}],null,!1,748916141)}):e._e(),o("el-table-column")],1),e.isRoot?o("el-button",{staticStyle:{"margin-top":"20px"},attrs:{size:"mini"},on:{click:function(t){e.createDialogFormVisible=!0}}},[e._v("添加新平台")]):e._e()],1)],1),o("CreatePlatformDialog",{attrs:{dialogFormVisible:e.createDialogFormVisible},on:{"update:dialogFormVisible":function(t){e.createDialogFormVisible=t},"update:dialog-form-visible":function(t){e.createDialogFormVisible=t}}}),o("EditPlatformDialog",{attrs:{formData:e.editPlatformItem,dialogFormVisible:e.editDialogFormVisible},on:{"update:dialogFormVisible":function(t){e.editDialogFormVisible=t},"update:dialog-form-visible":function(t){e.editDialogFormVisible=t}}})],1)},s=[],i=o("bc3a"),l=o.n(i),n=o("fb21"),r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"添加平台","show-close":!1,visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"平台名称","label-width":e.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请输入平台名称",autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),o("el-form-item",{attrs:{label:"平台别名","label-width":e.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请输入平台别名",autocomplete:"off"},model:{value:e.form.alias,callback:function(t){e.$set(e.form,"alias",t)},expression:"form.alias"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)],1)},c=[],m={name:"mini-im-create-admin",data:function(){return{form:{title:"",alias:""},formLabelWidth:"80px"}},props:{dialogFormVisible:Boolean,complete:Function},methods:{closeModal:function(){this.$emit("update:dialogFormVisible",!1)},save:function(){var e=this,t=this.$loading({lock:!0,text:"保存中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});l.a.post("/platform",this.form).then((function(o){console.log(o),t.close(),e.$message.success("添加成功"),e.closeModal(),e.resize(),e.$store.dispatch("ON_GET_PLATFORM_CONFIG")})).catch((function(o){t.close(),e.$message.error(o.response.data.message)}))},resize:function(){this.form={title:"",alias:""}}}},f=m,u=o("2877"),d=Object(u["a"])(f,r,c,!1,null,"74dae80a",null),p=d.exports,g=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-dialog",{attrs:{title:"修改平台","show-close":!1,visible:e.dialogFormVisible,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{attrs:{model:e.form}},[o("el-form-item",{attrs:{label:"平台名称","label-width":e.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请输入平台名称",autocomplete:"off"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),o("el-form-item",{attrs:{label:"平台别名","label-width":e.formLabelWidth}},[o("el-input",{attrs:{placeholder:"请输入平台别名",autocomplete:"off"},model:{value:e.form.alias,callback:function(t){e.$set(e.form,"alias",t)},expression:"form.alias"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:e.closeModal}},[e._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("保 存")])],1)],1)},b=[],h={name:"me-create-admin",data:function(){return{form:{title:"",alias:""},formLabelWidth:"80px"}},props:{dialogFormVisible:Boolean,complete:Function,formData:Object},methods:{closeModal:function(){this.$emit("update:dialogFormVisible",!1)},save:function(){var e=this,t=this.$loading({lock:!0,text:"保存中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.5)"});l.a.put("/platform",this.form).then((function(o){console.log(o),t.close(),e.$message.success("添加成功"),e.closeModal(),e.$store.dispatch("ON_GET_PLATFORM_CONFIG")})).catch((function(o){t.close(),e.$message.error(o.response.data.message)}))}},watch:{formData:function(){this.form=Object.assign({},this.form,this.formData)}}},y=h,v=Object(u["a"])(y,g,b,!1,null,"51cfd3c3",null),_=v.exports,$={name:"system",components:{CreatePlatformDialog:p,EditPlatformDialog:_},data:function(){return{activeName:"first",systemInfo:{},companyInfo:{},isUploadingSysLogo:!1,uploadysLogoPercent:"",isUploadingCompany:!1,uploadCompanyPercent:"",qiniuSecret:{},createDialogFormVisible:!1,editDialogFormVisible:!1,editPlatformItem:{}}},computed:{isRoot:function(){return!!this.$store.getters.adminInfo&&1==this.$store.getters.adminInfo.root}},updated:function(){this.$nextTick((function(){this.systemInfo=this.$store.getters.systemInfo,this.companyInfo=this.$store.getters.companyInfo}))},mounted:function(){this.systemInfo=this.$store.getters.systemInfo,this.companyInfo=this.$store.getters.companyInfo,this.isRoot&&this.getQiniu()},methods:{onSubmit:function(){this.$confirm("您确定要保存修改后的配置吗?","温馨提示！",{confirmButtonText:"保存",cancelButtonText:"取消",center:!0,type:"warning"})},systemLogoUpload:function(e){var t=this,o=e.target.files[0];Object(n["a"])({file:o,progress:function(e){t.isUploadingSysLogo=!0,t.uploadysLogoPercent=e+"%"},success:function(e){t.isUploadingSysLogo=!1,t.uploadysLogoPercent="",t.$message.success("上传成功");var o=t.$store.getters.configs.upload_host+"/"+e;t.systemInfo.logo=o},error:function(e){t.isUploadingSysLogo=!1,t.uploadysLogoPercent="",t.$message.error(e.message)}})},saveSystem:function(){var e=this;this.$confirm("您确定要保存修改后的系统配置吗?","温馨提示！",{confirmButtonText:"保存",cancelButtonText:"取消",center:!0,type:"warning"}).then((function(){l.a.put("/system",e.systemInfo).then((function(t){e.$store.commit("onChangeSystemInfo",t.data.data),e.$message.success("保存成功"),e.$store.dispatch("ON_GET_SYSTEM"),e.$store.dispatch("ON_GET_UPLOADS_CONFIG")})).catch((function(t){e.$message.error(t.response.data.message)}))}))},companyLogoUpload:function(e){var t=this,o=e.target.files[0];Object(n["a"])({file:o,progress:function(e){t.isUploadingCompany=!0,t.uploadCompanyPercent=e+"%"},success:function(e){t.isUploadingCompany=!1,t.uploadCompanyPercent="",t.$message.success("上传成功");var o=t.$store.getters.configs.upload_host+"/"+e;t.companyInfo.logo=o},error:function(e){t.isUploadingCompany=!1,t.uploadCompanyPercent="",t.$message.error(e.message)}})},saveCompany:function(){var e=this;this.$confirm("您确定要保存修改后的公司信息吗?","温馨提示！",{confirmButtonText:"保存",cancelButtonText:"取消",center:!0,type:"warning"}).then((function(){l.a.put("/company",e.companyInfo).then((function(t){e.$store.commit("onChangeCompanyInfo",t.data.data),e.$message.success("保存成功")})).catch((function(t){e.$message.error(t.response.data.message)}))}))},getQiniu:function(){var e=this;l.a.get("/qiniu").then((function(t){e.qiniuSecret=t.data.data})).catch((function(t){e.$message.error(t.response.data.message)}))},saveQiniu:function(){var e=this;this.$confirm("您确定要保存修改后的七牛配置信息吗?如配置信息错误会导致客户端无法上传图片文件","警告！",{confirmButtonText:"保存",cancelButtonText:"取消",center:!0,type:"warning"}).then((function(){l.a.put("/qiniu",e.qiniuSecret).then((function(t){console.log(t.data.data),e.$message.success("保存成功")})).catch((function(t){e.$message.error(t.response.data.message)}))}))},deletePlatform:function(e){var t=this;console.log(e),this.$confirm("您确定要删除该平台配置吗? 删除后不可恢复！","温馨提示！",{confirmButtonText:"确定",cancelButtonText:"取消",center:!0,type:"warning"}).then((function(){l.a.delete("/platform/"+e.id).then((function(e){console.log(e.data),t.$message.success("删除成功"),t.$store.dispatch("ON_GET_PLATFORM_CONFIG")})).catch((function(e){t.$message.error(e.response.data.message)}))}))},editPlatform:function(e){this.editPlatformItem=e,this.editDialogFormVisible=!0}}},k=$,I=(o("dbd7"),Object(u["a"])(k,a,s,!1,null,"3a76b6f8",null));t["default"]=I.exports},"2fec":function(e,t,o){},dbd7:function(e,t,o){"use strict";var a=o("2fec"),s=o.n(a);s.a}}]);
//# sourceMappingURL=chunk-650419d0.394afa0b.js.map