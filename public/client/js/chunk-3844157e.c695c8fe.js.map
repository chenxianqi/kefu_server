{"version":3,"sources":["webpack:///./src/views/workorder_create.vue?4ef1","webpack:///./node_modules/core-js/modules/es6.regexp.replace.js","webpack:///./src/views/workorder_create.vue?1042","webpack:///src/views/workorder_create.vue","webpack:///./src/views/workorder_create.vue?1481","webpack:///./src/views/workorder_create.vue"],"names":["anObject","toObject","toLength","toInteger","advanceStringIndex","regExpExec","max","Math","min","floor","SUBSTITUTION_SYMBOLS","SUBSTITUTION_SYMBOLS_NO_NAMED","maybeToString","it","undefined","String","defined","REPLACE","$replace","maybeCallNative","searchValue","replaceValue","O","this","fn","call","regexp","res","done","value","rx","S","functionalReplace","global","fullUnicode","unicode","lastIndex","results","result","push","matchStr","accumulatedResult","nextSourcePosition","i","length","matched","position","index","captures","j","namedCaptures","groups","replacerArgs","concat","replacement","apply","getSubstitution","slice","str","tailPos","m","symbols","match","ch","capture","charAt","n","f","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","slot","on","$event","$router","go","_e","class","isShowHeader","isShowTypesPicker","_v","_s","selectTyped","directives","name","rawName","request","expression","domProps","target","composing","$set","source","uploadFile","submit","types","onValuesChange","staticRenderFns","components","data","isSubmit","computed","values","workorderTypes","title","mounted","methods","tid","id","console","log","_","fileDom","e","file","files","isShowUploadLoading","$uploadFile","mode","uploadToken","percent","success","html","self","fullPath","host","src","fileType","substr","lastIndexOf","indexOf","message","fail","response","content","component"],"mappings":"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","file":"js/chunk-3844157e.c695c8fe.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workorder_create.vue?vue&type=style&index=0&id=c74ea690&lang=stylus&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workorder_create.vue?vue&type=style&index=0&id=c74ea690&lang=stylus&scoped=true&\"","'use strict';\n\nvar anObject = require('./_an-object');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar toInteger = require('./_to-integer');\nvar advanceStringIndex = require('./_advance-string-index');\nvar regExpExec = require('./_regexp-exec-abstract');\nvar max = Math.max;\nvar min = Math.min;\nvar floor = Math.floor;\nvar SUBSTITUTION_SYMBOLS = /\\$([$&`']|\\d\\d?|<[^>]*>)/g;\nvar SUBSTITUTION_SYMBOLS_NO_NAMED = /\\$([$&`']|\\d\\d?)/g;\n\nvar maybeToString = function (it) {\n  return it === undefined ? it : String(it);\n};\n\n// @@replace logic\nrequire('./_fix-re-wks')('replace', 2, function (defined, REPLACE, $replace, maybeCallNative) {\n  return [\n    // `String.prototype.replace` method\n    // https://tc39.github.io/ecma262/#sec-string.prototype.replace\n    function replace(searchValue, replaceValue) {\n      var O = defined(this);\n      var fn = searchValue == undefined ? undefined : searchValue[REPLACE];\n      return fn !== undefined\n        ? fn.call(searchValue, O, replaceValue)\n        : $replace.call(String(O), searchValue, replaceValue);\n    },\n    // `RegExp.prototype[@@replace]` method\n    // https://tc39.github.io/ecma262/#sec-regexp.prototype-@@replace\n    function (regexp, replaceValue) {\n      var res = maybeCallNative($replace, regexp, this, replaceValue);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n      var functionalReplace = typeof replaceValue === 'function';\n      if (!functionalReplace) replaceValue = String(replaceValue);\n      var global = rx.global;\n      if (global) {\n        var fullUnicode = rx.unicode;\n        rx.lastIndex = 0;\n      }\n      var results = [];\n      while (true) {\n        var result = regExpExec(rx, S);\n        if (result === null) break;\n        results.push(result);\n        if (!global) break;\n        var matchStr = String(result[0]);\n        if (matchStr === '') rx.lastIndex = advanceStringIndex(S, toLength(rx.lastIndex), fullUnicode);\n      }\n      var accumulatedResult = '';\n      var nextSourcePosition = 0;\n      for (var i = 0; i < results.length; i++) {\n        result = results[i];\n        var matched = String(result[0]);\n        var position = max(min(toInteger(result.index), S.length), 0);\n        var captures = [];\n        // NOTE: This is equivalent to\n        //   captures = result.slice(1).map(maybeToString)\n        // but for some reason `nativeSlice.call(result, 1, result.length)` (called in\n        // the slice polyfill when slicing native arrays) \"doesn't work\" in safari 9 and\n        // causes a crash (https://pastebin.com/N21QzeQA) when trying to debug it.\n        for (var j = 1; j < result.length; j++) captures.push(maybeToString(result[j]));\n        var namedCaptures = result.groups;\n        if (functionalReplace) {\n          var replacerArgs = [matched].concat(captures, position, S);\n          if (namedCaptures !== undefined) replacerArgs.push(namedCaptures);\n          var replacement = String(replaceValue.apply(undefined, replacerArgs));\n        } else {\n          replacement = getSubstitution(matched, S, position, captures, namedCaptures, replaceValue);\n        }\n        if (position >= nextSourcePosition) {\n          accumulatedResult += S.slice(nextSourcePosition, position) + replacement;\n          nextSourcePosition = position + matched.length;\n        }\n      }\n      return accumulatedResult + S.slice(nextSourcePosition);\n    }\n  ];\n\n    // https://tc39.github.io/ecma262/#sec-getsubstitution\n  function getSubstitution(matched, str, position, captures, namedCaptures, replacement) {\n    var tailPos = position + matched.length;\n    var m = captures.length;\n    var symbols = SUBSTITUTION_SYMBOLS_NO_NAMED;\n    if (namedCaptures !== undefined) {\n      namedCaptures = toObject(namedCaptures);\n      symbols = SUBSTITUTION_SYMBOLS;\n    }\n    return $replace.call(replacement, symbols, function (match, ch) {\n      var capture;\n      switch (ch.charAt(0)) {\n        case '$': return '$';\n        case '&': return matched;\n        case '`': return str.slice(0, position);\n        case \"'\": return str.slice(tailPos);\n        case '<':\n          capture = namedCaptures[ch.slice(1, -1)];\n          break;\n        default: // \\d\\d?\n          var n = +ch;\n          if (n === 0) return match;\n          if (n > m) {\n            var f = floor(n / 10);\n            if (f === 0) return match;\n            if (f <= m) return captures[f - 1] === undefined ? ch.charAt(1) : captures[f - 1] + ch.charAt(1);\n            return match;\n          }\n          capture = captures[n - 1];\n      }\n      return capture === undefined ? '' : capture;\n    });\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[(_vm.isShowHeader)?_c('mt-header',{attrs:{\"fixed\":\"\",\"title\":\"创建工单\"}},[_c('div',{attrs:{\"slot\":\"left\"},slot:\"left\"},[_c('mt-button',{attrs:{\"icon\":\"back\"},on:{\"click\":function($event){return _vm.$router.go(-1)}}})],1)]):_vm._e(),_c('div',{staticClass:\"content\",class:{'hide-header': !_vm.isShowHeader}},[_c('div',{staticClass:\"field-line arrow-right\",on:{\"click\":function($event){_vm.isShowTypesPicker = true}}},[_c('span',[_vm._v(\"类型:\")]),_c('span',[_vm._v(_vm._s(_vm.selectTyped || '选择工单分类'))])]),_c('div',{staticClass:\"field-line algin-left\"},[_c('span',[_vm._v(\"标题:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.request.title),expression:\"request.title\"}],attrs:{\"type\":\"text\",\"placeholder\":\"请输入工单标题~\"},domProps:{\"value\":(_vm.request.title)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.request, \"title\", $event.target.value)}}})]),_c('div',{staticClass:\"field-line algin-left\"},[_c('span',[_vm._v(\"手机:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.request.phone),expression:\"request.phone\"}],attrs:{\"type\":\"number\",\"placeholder\":\"请输入您的手机~\"},domProps:{\"value\":(_vm.request.phone)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.request, \"phone\", $event.target.value)}}})]),_c('div',{staticClass:\"tip\"},[_vm._v(\"必填，预留手机号方便客服联系到您~\")]),_c('div',{staticClass:\"field-line algin-left\"},[_c('span',[_vm._v(\"邮箱:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.request.email),expression:\"request.email\"}],attrs:{\"type\":\"email\",\"placeholder\":\"请输入您的电子邮箱~\"},domProps:{\"value\":(_vm.request.email)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.request, \"email\", $event.target.value)}}})]),_c('div',{staticClass:\"tip\"},[_vm._v(\"非必填，预留邮箱后若工单回复后会通过邮箱通知您~\")]),_c('div',{staticClass:\"field-line textarea\"},[_c('span',[_vm._v(\"内容:\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.request.content),expression:\"request.content\"}],attrs:{\"placeholder\":\"请输入您的工单内容~\"},domProps:{\"value\":(_vm.request.content)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.request, \"content\", $event.target.value)}}})]),_c('div',{staticClass:\"field-line arrow-right file\"},[_c('span',[_vm._v(\"附件:\")]),_c('span',{class:{'ed': _vm.source != ''}},[_vm._v(_vm._s(_vm.source ? '已上传附件，重新上传可替换~' : '上传附件'))]),_c('input',{attrs:{\"type\":\"file\"},on:{\"change\":_vm.uploadFile}})]),_c('span',{staticClass:\"sub-btn\",on:{\"click\":function($event){return _vm.submit()}}},[_vm._v(\"提交\")])]),(_vm.isShowTypesPicker)?_c('div',{staticClass:\"types-sheet\"},[_c('div',{staticClass:\"picker-box\"},[_c('div',{staticClass:\"title\"},[_c('span',[_vm._v(\"选择工单类型\")]),_c('span',{staticClass:\"sub-btn\",on:{\"click\":function($event){_vm.isShowTypesPicker = false}}},[_vm._v(\"确定\")])]),_c('mt-picker',{attrs:{\"slots\":_vm.types},on:{\"change\":_vm.onValuesChange}})],1)]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <mt-header v-if=\"isShowHeader\" fixed title=\"创建工单\">\n      <div slot=\"left\">\n        <mt-button @click=\"$router.go(-1)\" icon=\"back\"></mt-button>\n      </div>\n    </mt-header>\n    <div class=\"content\" :class=\"{'hide-header': !isShowHeader}\">\n\n      <div class=\"field-line arrow-right\" @click=\"isShowTypesPicker = true\">\n        <span>类型:</span>\n        <span>{{selectTyped || '选择工单分类'}}</span>\n      </div>\n      <div class=\"field-line algin-left\">\n        <span>标题:</span>\n        <input type=\"text\" v-model=\"request.title\" placeholder=\"请输入工单标题~\">\n      </div>\n      <div class=\"field-line algin-left\">\n        <span>手机:</span>\n        <input type=\"number\" v-model=\"request.phone\" placeholder=\"请输入您的手机~\">\n      </div>\n      <div class=\"tip\">必填，预留手机号方便客服联系到您~</div>\n      <div class=\"field-line algin-left\">\n        <span>邮箱:</span>\n        <input type=\"email\" v-model=\"request.email\" placeholder=\"请输入您的电子邮箱~\">\n      </div>\n      <div class=\"tip\">非必填，预留邮箱后若工单回复后会通过邮箱通知您~</div>\n      <div class=\"field-line textarea\">\n        <span>内容:</span>\n        <textarea v-model=\"request.content\" placeholder=\"请输入您的工单内容~\"></textarea>\n      </div>\n      <div class=\"field-line arrow-right file\">\n        <span>附件:</span>\n        <span :class=\"{'ed': source != ''}\">{{source ? '已上传附件，重新上传可替换~' : '上传附件'}}</span>\n        <input type=\"file\" @change=\"uploadFile\" />\n      </div>\n      <span class=\"sub-btn\" @click=\"submit()\">提交</span>\n    </div>\n\n    <!-- types-sheet -->\n    <div class=\"types-sheet\" v-if=\"isShowTypesPicker\">\n      <!-- <div class=\"mask\" @click=\"isShowTypesPicker = false\"></div> -->\n      <div class=\"picker-box\">\n        <div class=\"title\">\n          <span>选择工单类型</span>\n          <span class=\"sub-btn\" @click=\"isShowTypesPicker = false\">确定</span>\n        </div>\n        <mt-picker :slots=\"types\" @change=\"onValuesChange\"></mt-picker>\n      </div>\n    </div>\n\n  </div>\n</template>\n<script>\nimport { mapGetters } from \"vuex\";\nimport { Toast } from \"mint-ui\";\nimport axios from \"axios\";\nexport default {\n  name: \"workorder_create\",\n  components: {},\n  data() {\n    return {\n      isSubmit: false,\n      request: {\n        \"tid\": 0,\n        \"title\": \"\",\n        \"content\": \"\",\n        \"phone\": \"\",\n        \"email\": \"\"\n      },\n      selectTyped: \"\",\n      source: \"\",\n      isShowTypesPicker: false\n    };\n  },\n  computed: {\n    ...mapGetters([\n      \"isShowHeader\",\n      \"workorders\",\n      \"userInfo\",\n      \"workorderTypes\",\n      \"uploadToken\",\n      \"workorderTypes\"\n    ]),\n    types() {\n      var values = [];\n      var slot = [\n        {\n          flex: 1,\n          values: [],\n          className: \"workorder-create-picker\",\n          textAlign: \"center\"\n        }\n      ];\n      for (var i = 0; i < this.workorderTypes.length; i++) {\n        values.push(this.workorderTypes[i].title);\n      }\n      slot[0].values = values;\n      return slot;\n    }\n  },\n  mounted() {\n    \n  },\n  methods: {\n    onValuesChange(_, values) {\n      this.selectTyped = values[0]\n      for(var i=0; i<this.workorderTypes.length; i++){\n        if(values[0] == this.workorderTypes[i].title){\n          this.request.tid = this.workorderTypes[i].id\n          break\n        }\n      }\n      console.log(_)\n    },\n    uploadFile(e) {\n      var fileDom = e.target;\n      var file = fileDom.files[0];\n      this.isShowUploadLoading = true;\n      const self = this;\n      this.$uploadFile({\n        file,\n        mode: this.uploadToken.mode,\n        // 七牛才会执行\n        percent() {},\n        success(src) {\n\n          self.isShowUploadLoading = false;\n          var html\n          var fullPath = self.uploadToken.host + \"/\" + src;\n          var fileType = src.substr(src.lastIndexOf(\".\") + 1);\n          if (\"jpg,jpeg,png,JPG,JPEG,PNG\".indexOf(fileType) != -1) {\n              html = \"<br><img style='max-width:45%' preview='1' src='\" + fullPath + \"' />\"\n          }else{\n              html = \"<br><img style='width:20px;height:30px;top:3px; right:3px;position: relative;' preview='1' src='http://qiniu.cmp520.com/fj.png' />\"\n              html += \"<a target='_blank' style='color: #2e9dfc;' href='\"+fullPath+\"'>下载附件</a>\"\n          }\n          self.source = html\n          Toast({\n            message: \"上传成功~\"\n          });\n        },\n        fail(e) {\n          self.isShowUploadLoading = false;\n          if (e.response && e.response.data) {\n            Toast({\n              message: e.response.data.message\n            });\n            return;\n          }\n        }\n      });\n    },\n    submit(){\n      if(this.request.tid == 0){\n        Toast({\n          message: \"请选择工单类型！\"\n        });\n        return\n      }\n      if(this.request.title.trim() == \"\"){\n        Toast({\n          message: \"工单标题不能为空！\"\n        });\n        return\n      }\n      if(this.request.content.trim() == \"\"){\n        Toast({\n          message: \"工单内容不能为空！\"\n        });\n        return\n      }\n      if(this.isSubmit) return\n      this.isSubmit = true\n      this.request.content += this.source\n      axios\n        .post(\"/public/workorder/create\", this.request)\n        .then(response => {\n          this.isSubmit = false\n          Toast({\n            message: \"工单创建成功~\"\n          });\n          setTimeout(()=>this.$router.replace(\"/workorder/detail/\"+response.data.data), 500)\n        })\n        .catch(error => {\n          this.isSubmit = false\n          Toast({\n            message: error.response.data.message\n          });\n          console.log(error);\n        });\n    }\n  }\n};\n</script>\n<style lang=\"stylus\" scoped>\n.content {\n  padding 50px 10px\n  .field-line{\n    display flex\n    justify-content space-between\n    box-sizing border-box\n    height 45px\n    border-bottom 1px solid #ddd\n    align-content center\n    align-items center\n    font-size 14px\n    color #333\n    span:first-child{\n      width 35px\n    }\n    input{\n      flex-grow 1\n      padding-left 10px\n      height 100%\n      background none \n      border 0\n      color #333\n      font-size 14px\n      border-radius 0\n    }\n    &.algin-left{\n      align-content left \n      align-items left\n    }\n    &.arrow-right{\n      background url(./../assets/arrow.png) right center no-repeat\n      background-size  18px\n      padding-right 25px\n    }\n    &.file{\n      position relative\n      overflow hidden\n      margin-top 20px\n      border-top 1px solid #ddd\n      .ed{\n        color #8bc34a\n      }\n      input{\n        font-size 100px\n        opacity 0\n        position absolute\n        top 0\n        right 0\n      }\n    }\n    &.textarea{\n      align-items start\n      align-content start\n      border-bottom 0\n      padding-top 10px\n      height 100px\n      textarea{\n        flex-grow 1\n        border 0\n        height 100%\n        resize none\n        color #333\n        font-size 14px\n        padding 3px 10px\n        background-color rgba(0, 0, 0, 0.03);\n        border-radius 3px\n      }\n    }\n  }\n  .tip{\n    font-size 11px\n    color #ff9800\n  }\n  &.hide-header {\n    padding-top: 0;\n  }\n  .sub-btn {\n    display: block;\n    width: 100%;\n    height: 45px;\n    color: #fff;\n    margin-top 30px\n    line-height: 45px;\n    text-align: center;\n    border-radius: 3px;\n    border: none;\n    font-size: 14px;\n    background: linear-gradient(to right, #26a2ff, #736cde);\n    flex-shrink: 0;\n\n    &:active {\n      opacity: 0.8;\n    }\n  }\n}\n.types-sheet{\n  width 100vw;\n  height 100vh\n  position fixed\n  top 0\n  left 0\n  right 0\n  bottom 0\n  margin auto\n  background-color rgba(0,0,0,.5)\n  // .mask{\n  //   width 100vw;\n  //   height 100vh\n  //   background-color rgba(0,0,0,.5)\n  // }\n  .picker-box{\n    height 250px\n    width 100vw\n    position absolute\n    bottom 0\n    left 0\n    right 0\n    margin 0 auto\n    background-color #fff\n  }\n  .title{\n    height 35px\n    border-bottom 1px solid #f3f3f3\n    display flex\n    justify-content space-between\n    padding 0 10px\n    box-sizing border-box\n    align-content center\n    align-items center\n    span{\n      font-size 14px\n      color #333\n    }\n    .sub-btn {\n      display: block;\n      width: 55px;\n      height: 30px;\n      color: #26a2ff\n      line-height: 30px;\n      text-align: right;\n      font-size: 14px;\n      font-weight 900\n      &:active {\n        opacity: 0.8;\n      }\n    }\n  }\n}\n</style>\n\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workorder_create.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-babel/node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./workorder_create.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./workorder_create.vue?vue&type=template&id=c74ea690&scoped=true&\"\nimport script from \"./workorder_create.vue?vue&type=script&lang=js&\"\nexport * from \"./workorder_create.vue?vue&type=script&lang=js&\"\nimport style0 from \"./workorder_create.vue?vue&type=style&index=0&id=c74ea690&lang=stylus&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c74ea690\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}